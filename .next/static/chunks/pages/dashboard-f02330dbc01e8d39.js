(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{6353:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(7876),c=s(553),r=s(4232),i=s(8230),n=s.n(i),l=s(9461);function o(){let{data:e,status:t}=(0,c.useSession)(),[s,i]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0),[x,u]=(0,r.useState)(!0);return(console.log("Session:",e,"Status:",t),(0,r.useEffect)(()=>{"authenticated"===t&&e?fetch(e.user.id?"/api/certificates?userId=".concat(e.user.id):"/api/certificates?userEmail=".concat(e.user.email),{cache:"no-store"}).then(e=>e.json()).then(e=>{console.log("Fetched certificates:",e),i(e),m(!1)}).catch(e=>{console.error("Error fetching certificates:",e),m(!1)}):m(!1)},[e,t]),(0,r.useEffect)(()=>{fetch("/api/exams",{cache:"no-store"}).then(e=>e.json()).then(e=>{console.log("Fetched exams:",e),d(e),u(!1)}).catch(e=>{console.error("Error fetching exams:",e),u(!1)})},[]),x||h)?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("div",{className:"p-8",children:["authenticated"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold",children:["Welcome, ",e.user.name]}),(0,a.jsx)("button",{onClick:()=>(0,c.signOut)({callbackUrl:"/"}),className:"mt-4 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded",children:"Logout"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Exam Dashboard"}),(0,a.jsx)("button",{onClick:()=>(0,c.signIn)(),className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded",children:"Login"})]}),"authenticated"===t&&(0,a.jsxs)("section",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Your Certificates"}),0===s.length?(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"No certificates available at the moment."}):(0,a.jsx)("ul",{className:"mt-4 space-y-4",children:s.map(e=>(0,a.jsxs)("li",{className:"border p-4 rounded shadow hover:bg-gray-50",children:[(0,a.jsxs)("p",{className:"text-lg font-medium text-indigo-600",children:["Certificate for: ",e.examName]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Issued on:"," ",new Date(e.issuedAt).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Certificate ID: ",e.certificateId]}),(0,a.jsx)("a",{href:"/api/certificates?certificateNumber=".concat(e.certificateId),target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-block text-blue-600 hover:underline",children:"View Certificate PDF"})]},e._id))})]}),(0,a.jsxs)("section",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Available Exams"}),0===o.length?(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"No exams available at the moment."}):(0,a.jsx)("ul",{className:"mt-4 space-y-4",children:o.map(e=>(0,a.jsx)("li",{className:"border p-4 rounded shadow hover:bg-gray-50",children:(0,a.jsxs)(n(),{href:"/exam/".concat(e._id),className:"block",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-lg font-medium text-indigo-600",children:e.title}),(0,a.jsx)("button",{className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition",children:"Take Exam"})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Available Anytime"})]})},e._id))})]})]})]})}},6663:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(6353)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[230,0,112,259,461,636,593,792],()=>t(6663)),_N_E=e.O()}]);