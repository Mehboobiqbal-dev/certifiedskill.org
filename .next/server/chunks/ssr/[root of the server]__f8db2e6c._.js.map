{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/pages/_document.js"],"sourcesContent":["import { Html, Head, Main, NextScript } from \"next/document\";\n\nexport default function Document() {\n  return (\n    <Html lang=\"en\">\n      <Head />\n      <body className=\"antialiased\">\n        <Main />\n        <NextScript />\n      </body>\n    </Html>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBACE,qKAAC,yHAAA,CAAA,OAAI;QAAC,MAAK;;0BACT,qKAAC,yHAAA,CAAA,OAAI;;;;;0BACL,qKAAC;gBAAK,WAAU;;kCACd,qKAAC,yHAAA,CAAA,OAAI;;;;;kCACL,qKAAC,yHAAA,CAAA,aAAU;;;;;;;;;;;;;;;;;AAInB","debugId":null}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/pages/_app.js"],"sourcesContent":["import \"../styles/globals.css\";\n\nimport { SessionProvider } from \"next-auth/react\";\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <SessionProvider session={pageProps.session}>\n      <Component {...pageProps} />\n    </SessionProvider>\n  );\n}"],"names":[],"mappings":";;;;AAEA;;;;AAEe,SAAS,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE;IACpD,qBACE,qKAAC,mIAAA,CAAA,kBAAe;QAAC,SAAS,UAAU,OAAO;kBACzC,cAAA,qKAAC;YAAW,GAAG,SAAS;;;;;;;;;;;AAG9B","debugId":null}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/pages/exam/%5Bid%5D.js"],"sourcesContent":["import { FaceDetection } from '@mediapipe/face_detection';\nimport { Camera } from '@mediapipe/camera_utils';\nimport { useEffect, useRef, useState } from 'react';\nimport Head from 'next/head';\n\nfunction AntiCheating({ onCheatingDetected }) {\n  const videoRef = useRef(null);\n  const [isCheating, setIsCheating] = useState(false);\n\n  useEffect(() => {\n    if (!videoRef.current) return;\n\n    // Initialize Face Detection\n    const faceDetection = new FaceDetection({\n      locateFile: (file) =>\n        `https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/${file}`,\n    });\n\n    faceDetection.setOptions({\n      model: 'short',\n      minDetectionConfidence: 0.5,\n    });\n\n    faceDetection.onResults((results) => {\n      if (!results.detections || results.detections.length === 0) {\n        // Face not detected\n        setIsCheating(true);\n        onCheatingDetected();\n      } else {\n        // Face detected\n        setIsCheating(false);\n      }\n    });\n\n    // Set up the webcam\n    const camera = new Camera(videoRef.current, {\n      onFrame: async () => {\n        await faceDetection.send({ image: videoRef.current });\n      },\n      width: 640,\n      height: 480,\n    });\n    camera.start();\n\n    return () => {\n      camera.stop();\n    };\n  }, [onCheatingDetected]);\n\n  return (\n    <div>\n      {/* Video Feed */}\n      <video ref={videoRef} className=\"hidden\"></video>\n      {isCheating && (\n        <div className=\"fixed top-4 left-4 bg-red-600 text-white px-4 py-2 rounded shadow-md\">\n          Warning: Cheating Detected!\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function Exam({ exam }) {\n  // State to store the user's answers (using question index as key)\n  const [userAnswers, setUserAnswers] = useState({});\n  // State to know if the exam has been submitted\n  const [submitted, setSubmitted] = useState(false);\n  // Countdown timer: 40 minutes = 2400 seconds\n  const [timeLeft, setTimeLeft] = useState(40 * 60);\n  // Cheating count\n  const [cheatingCount, setCheatingCount] = useState(0);\n\n  // Timer effect: decrease timeLeft by 1 every second until time expires or submission occurs\n  useEffect(() => {\n    if (submitted) return; // Stop timer if the exam is submitted\n\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          // Auto-submit when time expires\n          handleSubmit();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [submitted]);\n\n  const handleOptionChange = (questionIndex, selectedOption) => {\n    setUserAnswers((prev) => ({ ...prev, [questionIndex]: selectedOption }));\n  };\n\n  // Submission handler: calculates the score, determines pass/fail,\n  // sends the result to MongoDB via a POST request, and sets the submitted flag.\n  const handleSubmit = async (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n    // Prevent multiple submissions\n    if (submitted) return;\n    setSubmitted(true);\n\n    // Calculate number of correct answers\n    const correctCount = exam.questions.reduce((count, question, index) => {\n      return userAnswers[index] === question.correctAnswer ? count + 1 : count;\n    }, 0);\n\n    const total = exam.questions.length;\n    // Example passing criteria: user must score at least 40\n    const passingScore = 40;\n    const passed = correctCount >= passingScore;\n    // Calculate time taken in seconds (Could be used later to display or store);\n    const timeTaken = (40 * 60) - timeLeft;\n\n    const resultData = {\n      examId: exam._id,\n      score: correctCount,\n      total,\n      passed,\n      timeTaken,\n      cheatingCount, // Number of cheating detections\n      createdAt: new Date(),\n    };\n\n    // Send result to your API endpoint for MongoDB storage.\n    try {\n      await fetch('/api/exams/result', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(resultData),\n      });\n    } catch (error) {\n      console.error('Failed to save exam result:', error);\n    }\n  };\n\n  const handleCheatingDetected = () => {\n    setCheatingCount((prev) => prev + 1); // Increment cheating count\n  };\n\n  // Helper function to conditionally style options after submission\n  const getOptionClass = (question, option, questionIndex) => {\n    if (!submitted) return 'cursor-pointer';\n    // Highlight the correct answer with a green background\n    if (option === question.correctAnswer) {\n      return 'bg-green-100';\n    }\n    // If the user selected an incorrect option, highlight it in red\n    if (userAnswers[questionIndex] === option && option !== question.correctAnswer) {\n      return 'bg-red-100';\n    }\n    return '';\n  };\n\n  const minutes = Math.floor(timeLeft / 60);\n  const seconds = timeLeft % 60;\n\n  // For display: recalculate correct count (once submitted)\n  const correctCountForDisplay = exam.questions.reduce((count, question, index) => {\n    return userAnswers[index] === question.correctAnswer ? count + 1 : count;\n  }, 0);\n\n  return (\n    <div className=\"relative\">\n      {/* Anti-Cheating Component */}\n      <AntiCheating onCheatingDetected={handleCheatingDetected} />\n\n      {/* Timer */}\n      {!submitted && (\n        <div className=\"fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded shadow-md\">\n          Time Remaining: {minutes}:{seconds < 10 ? `0${seconds}` : seconds}\n        </div>\n      )}\n\n      <div className=\"p-6 max-w-3xl mx-auto\">\n        <Head>\n          <title>{exam.title}</title>\n        </Head>\n        <h1 className=\"text-3xl font-bold mb-6\">{exam.title}</h1>\n\n        <form onSubmit={handleSubmit}>\n          {exam.questions.map((q, index) => (\n            <div\n              key={index}\n              className=\"bg-white shadow-md rounded-lg p-4 mb-6 border border-gray-200\"\n            >\n              <p className=\"text-lg font-medium mb-3\">{q.questionText}</p>\n              <div>\n                {q.options.map((option, i) => (\n                  <label\n                    key={i}\n                    className={`block p-2 mb-2 border rounded ${getOptionClass(q, option, index)}`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={`question-${index}`}\n                      value={option}\n                      checked={userAnswers[index] === option}\n                      onChange={() => handleOptionChange(index, option)}\n                      className=\"mr-2\"\n                      disabled={submitted}\n                    />\n                    {option}\n                  </label>\n                ))}\n              </div>\n              {submitted && (\n                <p className=\"mt-2\">\n                  {userAnswers[index] === q.correctAnswer ? (\n                    <span className=\"text-green-600 font-semibold\">Correct!</span>\n                  ) : (\n                    <span className=\"text-red-600 font-semibold\">\n                      Incorrect. Correct answer: {q.correctAnswer}\n                    </span>\n                  )}\n                </p>\n              )}\n            </div>\n          ))}\n\n          {!submitted && (\n            <button type=\"submit\" className=\"bg-blue-600 text-white px-6 py-2 rounded\">\n              Submit Answers\n            </button>\n          )}\n\n          {submitted && (\n            <div className=\"mt-4\">\n              <p className=\"text-xl font-bold\">\n                You got {correctCountForDisplay} out of {exam.questions.length} correct!\n              </p>\n              <p className=\"text-lg\">\n                {correctCountForDisplay >= 40\n                  ? 'Congratulations! You have passed the exam.'\n                  : 'Sorry, you did not pass the exam.'}\n              </p>\n              <p className=\"text-lg\">Time Taken: {Math.floor(timeTaken / 60)} minutes {timeTaken % 60} seconds.</p>\n              <p className=\"text-lg\">Cheating Attempts: {cheatingCount}</p>\n            </div>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport async function getServerSideProps({ params, req }) {\n  // Build the API URL dynamically based on the incoming request\n  const protocol = req.headers['x-forwarded-proto'] || 'http';\n  const host = req.headers.host;\n  const apiUrl = `${protocol}://${host}/api/exams/${params.id}`;\n\n  const res = await fetch(apiUrl);\n\n  if (!res.ok) {\n    const errorText = await res.text();\n    console.error('API error response:', errorText);\n    return { notFound: true };\n  }\n\n  const exam = await res.json();\n  return { props: { exam } };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}