{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/pages/_document.js"],"sourcesContent":["// /pages/_document.js\nimport { Html, Head, Main, NextScript } from \"next/document\";\n\nexport default function Document() {\n  return (\n    <Html lang=\"en\">\n      <Head>\n        {/* Include universal meta tags that apply to all pages */}\n        <meta charSet=\"UTF-8\" />\n        <meta name=\"description\" content=\"GetCertified - Your Certification Platform\" />\n        {/* Do not include <title> or viewport meta here */}\n      </Head>\n      <body className=\"antialiased\">\n        <Main />\n        <NextScript />\n      </body>\n    </Html>\n  );\n}\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;AACtB;;;AAEe,SAAS;IACtB,qBACE,qKAAC,yHAAA,CAAA,OAAI;QAAC,MAAK;;0BACT,qKAAC,yHAAA,CAAA,OAAI;;kCAEH,qKAAC;wBAAK,SAAQ;;;;;;kCACd,qKAAC;wBAAK,MAAK;wBAAc,SAAQ;;;;;;;;;;;;0BAGnC,qKAAC;gBAAK,WAAU;;kCACd,qKAAC,yHAAA,CAAA,OAAI;;;;;kCACL,qKAAC,yHAAA,CAAA,aAAU;;;;;;;;;;;;;;;;;AAInB","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/pages/_app.js"],"sourcesContent":["// /pages/_app.js\nimport \"../styles/globals.css\";\nimport { SessionProvider } from \"next-auth/react\";\n\nexport default function MyApp({ Component, pageProps: { session, ...pageProps } }) {\n  return (\n    <SessionProvider session={session}>\n      <Component {...pageProps} />\n    </SessionProvider>\n  );\n}\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;AAEjB;;;;AAEe,SAAS,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,OAAO,EAAE,GAAG,WAAW,EAAE;IAC/E,qBACE,qKAAC,mIAAA,CAAA,kBAAe;QAAC,SAAS;kBACxB,cAAA,qKAAC;YAAW,GAAG,SAAS;;;;;;;;;;;AAG9B","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/components/AntiCheating.jsx"],"sourcesContent":["// /components/AntiCheatingFaceAPI.jsx\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as faceapi from \"face-api.js\";\n\nfunction AntiCheatingFaceAPI({ onCheatingDetected }) {\n  const videoRef = useRef(null);\n  const [isCheating, setIsCheating] = useState(false);\n\n  useEffect(() => {\n    // Load the face detection model and start the webcam.\n    const runFaceDetection = async () => {\n      try {\n        // MODEL_URL is the path where your models are hosted inside the public folder.\n        const MODEL_URL = \"/models\";\n        \n        // Load the tiny face detector model.\n        await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);\n        \n        // Start the webcam.\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n          const stream = await navigator.mediaDevices.getUserMedia({ video: {} });\n          videoRef.current.srcObject = stream;\n        }\n      } catch (error) {\n        console.error(\"Error loading face-api models or starting camera:\", error);\n      }\n    };\n\n    runFaceDetection();\n\n    // Periodically run detection.\n    const intervalId = setInterval(async () => {\n      if (videoRef.current && videoRef.current.readyState === 4) {\n        try {\n          // Use the TinyFaceDetectorOptions for a lightweight detection.\n          const detections = await faceapi.detectAllFaces(\n            videoRef.current,\n            new faceapi.TinyFaceDetectorOptions()\n          );\n  \n          // If no faces are detected, trigger the cheating event.\n          if (!detections || detections.length === 0) {\n            setIsCheating(true);\n            onCheatingDetected();\n          } else {\n            setIsCheating(false);\n          }\n        } catch (err) {\n          console.error(\"Face detection error:\", err);\n        }\n      }\n    }, 1000);\n\n    // Cleanup: stop the webcam stream and clear the interval.\n    return () => {\n      clearInterval(intervalId);\n      if (videoRef.current && videoRef.current.srcObject) {\n        videoRef.current.srcObject.getTracks().forEach((track) => track.stop());\n      }\n    };\n  }, [onCheatingDetected]);\n\n  return (\n    <div>\n      {/* Hidden video element used for the webcam feed */}\n      <video\n        ref={videoRef}\n        autoPlay\n        muted\n        width={320}\n        height={240}\n        style={{ display: \"none\" }}\n      />\n      {isCheating && (\n        <div className=\"fixed top-4 left-4 bg-red-600 text-white px-4 py-2 rounded shadow-md\">\n          Warning: Cheating Detected!\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AntiCheatingFaceAPI;\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;AAEtC;AACA;;;;AAEA,SAAS,oBAAoB,EAAE,kBAAkB,EAAE;IACjD,MAAM,WAAW,CAAA,GAAA,mGAAA,CAAA,SAAM,AAAD,EAAE;IACxB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,sDAAsD;QACtD,MAAM,mBAAmB;YACvB,IAAI;gBACF,+EAA+E;gBAC/E,MAAM,YAAY;gBAElB,qCAAqC;gBACrC,MAAM,2HAAA,CAAA,OAAY,CAAC,gBAAgB,CAAC,WAAW,CAAC;gBAEhD,oBAAoB;gBACpB,IAAI,UAAU,YAAY,IAAI,UAAU,YAAY,CAAC,YAAY,EAAE;oBACjE,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;wBAAE,OAAO,CAAC;oBAAE;oBACrE,SAAS,OAAO,CAAC,SAAS,GAAG;gBAC/B;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,qDAAqD;YACrE;QACF;QAEA;QAEA,8BAA8B;QAC9B,MAAM,aAAa,YAAY;YAC7B,IAAI,SAAS,OAAO,IAAI,SAAS,OAAO,CAAC,UAAU,KAAK,GAAG;gBACzD,IAAI;oBACF,+DAA+D;oBAC/D,MAAM,aAAa,MAAM,CAAA,GAAA,2HAAA,CAAA,iBAAsB,AAAD,EAC5C,SAAS,OAAO,EAChB,IAAI,2HAAA,CAAA,0BAA+B;oBAGrC,wDAAwD;oBACxD,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;wBAC1C,cAAc;wBACd;oBACF,OAAO;wBACL,cAAc;oBAChB;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,yBAAyB;gBACzC;YACF;QACF,GAAG;QAEH,0DAA0D;QAC1D,OAAO;YACL,cAAc;YACd,IAAI,SAAS,OAAO,IAAI,SAAS,OAAO,CAAC,SAAS,EAAE;gBAClD,SAAS,OAAO,CAAC,SAAS,CAAC,SAAS,GAAG,OAAO,CAAC,CAAC,QAAU,MAAM,IAAI;YACtE;QACF;IACF,GAAG;QAAC;KAAmB;IAEvB,qBACE,qKAAC;;0BAEC,qKAAC;gBACC,KAAK;gBACL,QAAQ;gBACR,KAAK;gBACL,OAAO;gBACP,QAAQ;gBACR,OAAO;oBAAE,SAAS;gBAAO;;;;;;YAE1B,4BACC,qKAAC;gBAAI,WAAU;0BAAuE;;;;;;;;;;;;AAM9F;uCAEe","debugId":null}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/models/user.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst UserSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: true,\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n  },\n  password: {\n    type: String,\n    required: false,\n  },\n});\n\nconst User = mongoose.models.User || mongoose.model(\"User\", UserSchema);\n\nexport default User;\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,aAAa,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC;IACrC,MAAM;QACJ,MAAM;QACN,UAAU;IACZ;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,QAAQ;IACV;IACA,UAAU;QACR,MAAM;QACN,UAAU;IACZ;AACF;AAEA,MAAM,OAAO,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ;uCAE7C","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/lib/db.js"],"sourcesContent":["import mongoose from 'mongoose';\n\n// Ensure that the MONGO_URI is defined\nif (!process.env.MONGO_URI) {\n  throw new Error('Please define the MONGO_URI environment variable');\n}\n\n// Check if there's already a cached connection.\n// The global object in Node.js is similar to the window object in browsers.\nlet cached = global.mongoose;\n\nif (!cached) {\n  // If there's no existing cache, initialize one.\n  cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function connectToDatabase() {\n  // If there's an existing connection, return it\n  if (cached.conn) {\n    return cached.conn;\n  }\n  \n  // Otherwise, if there's no promise, create one and cache it.\n  if (!cached.promise) {\n    const options = { useNewUrlParser: true, useUnifiedTopology: true };\n    cached.promise = mongoose\n      .connect(process.env.MONGO_URI, options)\n      .then((mongooseInstance) => {\n        // Return an object that contains the DB connection\n        return { db: mongooseInstance.connection.db };\n      });\n  }\n\n  // Await the promise to finish and cache the connection.\n  cached.conn = await cached.promise;\n  return cached.conn;\n}\n\nexport default connectToDatabase;\n"],"names":[],"mappings":";;;AAAA;;AAEA,uCAAuC;AACvC,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS,EAAE;IAC1B,MAAM,IAAI,MAAM;AAClB;AAEA,gDAAgD;AAChD,4EAA4E;AAC5E,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,gDAAgD;IAChD,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,+CAA+C;IAC/C,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,6DAA6D;IAC7D,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,UAAU;YAAE,iBAAiB;YAAM,oBAAoB;QAAK;QAClE,OAAO,OAAO,GAAG,yGAAA,CAAA,UAAQ,CACtB,OAAO,CAAC,QAAQ,GAAG,CAAC,SAAS,EAAE,SAC/B,IAAI,CAAC,CAAC;YACL,mDAAmD;YACnD,OAAO;gBAAE,IAAI,iBAAiB,UAAU,CAAC,EAAE;YAAC;QAC9C;IACJ;IAEA,wDAAwD;IACxD,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB;uCAEe","debugId":null}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/app/api/auth/%5B...nextauth%5D/authOptions.js"],"sourcesContent":["import CredentialsProvider from \"next-auth/providers/credentials\";\nimport GithubProvider from \"next-auth/providers/github\";\nimport User from \"../../../../models/user\";\nimport connectToDatabase from \"../../../../lib/db\";\nimport bcrypt from \"bcryptjs\";\n\nexport const authOptions = {\n  session: {\n    strategy: \"jwt\",\n  },\n  providers: [\n    GithubProvider({\n      clientId: process.env.GITHUB_ID,\n      clientSecret: process.env.GITHUB_SECRET,\n    }),\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: {\n          label: \"Email\",\n          type: \"text\",\n          placeholder: \"you@example.com\"\n        },\n        password: {\n          label: \"Password\",\n          type: \"password\"\n        },\n      },\n      async authorize(credentials) {\n        try {\n          await connectToDatabase();\n          // Find the user by email\n          const user = await User.findOne({ email: credentials?.email });\n          if (!user)\n            throw new Error(\"No user found with that email.\");\n          // Compare the password with the hashed password\n          const isValidPassword = await bcrypt.compare(\n            credentials?.password || \"\",\n            user.password\n          );\n          if (!isValidPassword)\n            throw new Error(\"Invalid password.\");\n          return user;\n        } catch (error) {\n          console.error(\"Authorize error:\", error);\n          return null;\n        }\n      },\n    }),\n  ],\n  callbacks: {\n    async signIn({ account, profile }) {\n      if (account?.provider === \"github\") {\n        await connectToDatabase();\n        const existingUser = await User.findOne({ email: profile?.email });\n        if (!existingUser) {\n          await User.create({\n            name: profile?.name || profile?.login,\n            email: profile?.email,\n            role: \"student\",\n          });\n        }\n      }\n      return true;\n    },\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user._id.toString();\n        token.email = user.email;\n        token.name = user.name;\n        token.role = user.role || \"student\";\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      if (token) {\n        session.user = {\n          id: token.id,\n          email: token.email,\n          name: token.name,\n          role: token.role || \"student\",\n        };\n      }\n      return session;\n    },\n  },\n  pages: {\n    signIn: \"/sign-in\",\n  },\n  secret: process.env.NEXTAUTH_SECRET,\n};\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEO,MAAM,cAAc;IACzB,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,CAAA,GAAA,+JAAA,CAAA,UAAc,AAAD,EAAE;YACb,UAAU,QAAQ,GAAG,CAAC,SAAS;YAC/B,cAAc,QAAQ,GAAG,CAAC,aAAa;QACzC;QACA,CAAA,GAAA,yKAAA,CAAA,UAAmB,AAAD,EAAE;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBACL,OAAO;oBACP,MAAM;oBACN,aAAa;gBACf;gBACA,UAAU;oBACR,OAAO;oBACP,MAAM;gBACR;YACF;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI;oBACF,MAAM,CAAA,GAAA,kGAAA,CAAA,UAAiB,AAAD;oBACtB,yBAAyB;oBACzB,MAAM,OAAO,MAAM,uGAAA,CAAA,UAAI,CAAC,OAAO,CAAC;wBAAE,OAAO,aAAa;oBAAM;oBAC5D,IAAI,CAAC,MACH,MAAM,IAAI,MAAM;oBAClB,gDAAgD;oBAChD,MAAM,kBAAkB,MAAM,gHAAA,CAAA,UAAM,CAAC,OAAO,CAC1C,aAAa,YAAY,IACzB,KAAK,QAAQ;oBAEf,IAAI,CAAC,iBACH,MAAM,IAAI,MAAM;oBAClB,OAAO;gBACT,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,oBAAoB;oBAClC,OAAO;gBACT;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,QAAO,EAAE,OAAO,EAAE,OAAO,EAAE;YAC/B,IAAI,SAAS,aAAa,UAAU;gBAClC,MAAM,CAAA,GAAA,kGAAA,CAAA,UAAiB,AAAD;gBACtB,MAAM,eAAe,MAAM,uGAAA,CAAA,UAAI,CAAC,OAAO,CAAC;oBAAE,OAAO,SAAS;gBAAM;gBAChE,IAAI,CAAC,cAAc;oBACjB,MAAM,uGAAA,CAAA,UAAI,CAAC,MAAM,CAAC;wBAChB,MAAM,SAAS,QAAQ,SAAS;wBAChC,OAAO,SAAS;wBAChB,MAAM;oBACR;gBACF;YACF;YACA,OAAO;QACT;QACA,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,GAAG,CAAC,QAAQ;gBAC5B,MAAM,KAAK,GAAG,KAAK,KAAK;gBACxB,MAAM,IAAI,GAAG,KAAK,IAAI;gBACtB,MAAM,IAAI,GAAG,KAAK,IAAI,IAAI;YAC5B;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,OAAO;gBACT,QAAQ,IAAI,GAAG;oBACb,IAAI,MAAM,EAAE;oBACZ,OAAO,MAAM,KAAK;oBAClB,MAAM,MAAM,IAAI;oBAChB,MAAM,MAAM,IAAI,IAAI;gBACtB;YACF;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC","debugId":null}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 534, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/models/exam.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst examSchema = new mongoose.Schema({\n  title: { type: String, required: true },\n  questions: [\n    {\n      questionText: { type: String, required: true },\n      options: [{ type: String, required: true }],\n      correctAnswer: { type: String, required: true }\n    }\n  ],\n  duration: { type: Number, required: true },\n  startTime: { type: Date, required: true },\n  endTime: { type: Date, required: true }\n});\n\nexport default mongoose.models.Exam || mongoose.model('Exam', examSchema);\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,aAAa,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,WAAW;QACT;YACE,cAAc;gBAAE,MAAM;gBAAQ,UAAU;YAAK;YAC7C,SAAS;gBAAC;oBAAE,MAAM;oBAAQ,UAAU;gBAAK;aAAE;YAC3C,eAAe;gBAAE,MAAM;gBAAQ,UAAU;YAAK;QAChD;KACD;IACD,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,WAAW;QAAE,MAAM;QAAM,UAAU;IAAK;IACxC,SAAS;QAAE,MAAM;QAAM,UAAU;IAAK;AACxC;uCAEe,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ","debugId":null}},
    {"offset": {"line": 576, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 582, "column": 0}, "map": {"version":3,"sources":["file:///home/user/get-certified/pages/exam/%5Bid%5D.js"],"sourcesContent":["// pages/exam/[id].js\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\"; // using legacy pages router\nimport Head from \"next/head\";\nimport AntiCheating from \"../../components/AntiCheating\";\n\n// Import NextAuth server-side helper and your auth options\nimport { getServerSession } from \"next-auth/next\";\nimport { authOptions } from \"../../app/api/auth/[...nextauth]/authOptions\";\n\n// Import your database connection and Exam model\nimport connectToDatabase from \"../../lib/db\";\nimport Exam from \"../../models/exam\";\n\nexport default function ExamPage({ exam }) {\n  const router = useRouter();\n  const [userAnswers, setUserAnswers] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [timeLeft, setTimeLeft] = useState(40 * 60);\n  const [cheatingCount, setCheatingCount] = useState(0);\n  const [timeTaken, setTimeTaken] = useState(null);\n\n  // Timer effect\n  useEffect(() => {\n    if (submitted) return;\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          handleSubmit();\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [submitted]);\n\n  const handleOptionChange = (qIndex, selectedOption) => {\n    setUserAnswers((prev) => ({ ...prev, [qIndex]: selectedOption }));\n  };\n\n  const handleSubmit = async (e) => {\n    if (e && e.preventDefault) e.preventDefault();\n    if (submitted) return;\n    setSubmitted(true);\n\n    // Calculate exam score\n    const correctCount = exam.questions.reduce((count, question, idx) => {\n      return userAnswers[idx] === question.correctAnswer ? count + 1 : count;\n    }, 0);\n    const total = exam.questions.length;\n    const passingScore = 40; // your passing threshold\n    const passed = correctCount >= passingScore;\n    const computedTimeTaken = 40 * 60 - timeLeft;\n    setTimeTaken(computedTimeTaken);\n\n    const resultData = {\n      examId: exam._id,\n      score: correctCount,\n      total,\n      passed,\n      timeTaken: computedTimeTaken,\n      cheatingCount,\n      createdAt: new Date(),\n    };\n\n    try {\n      await fetch(\"/api/exams/result\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(resultData),\n      });\n    } catch (error) {\n      console.error(\"Failed to save exam result:\", error);\n    }\n  };\n\n  const handleCheatingDetected = () => {\n    setCheatingCount((prev) => prev + 1);\n  };\n\n  const getOptionClass = (question, option, qIndex) => {\n    if (!submitted) return \"cursor-pointer\";\n    if (option === question.correctAnswer) return \"bg-green-100\";\n    if (userAnswers[qIndex] === option && option !== question.correctAnswer)\n      return \"bg-red-100\";\n    return \"\";\n  };\n\n  const minutes = Math.floor(timeLeft / 60);\n  const seconds = timeLeft % 60;\n\n  const correctCountForDisplay = exam.questions.reduce((count, question, idx) => {\n    return userAnswers[idx] === question.correctAnswer ? count + 1 : count;\n  }, 0);\n\n  return (\n    <div className=\"relative\">\n      <AntiCheating onCheatingDetected={handleCheatingDetected} />\n\n      {!submitted && (\n        <div className=\"fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded shadow-md\">\n          Time Remaining: {minutes}:{seconds < 10 ? `0${seconds}` : seconds}\n        </div>\n      )}\n\n      <div className=\"p-6 max-w-3xl mx-auto\">\n        <Head>\n          <title>{exam.title}</title>\n        </Head>\n        <h1 className=\"text-3xl font-bold mb-6\">{exam.title}</h1>\n        <form onSubmit={handleSubmit}>\n          {exam.questions.map((q, index) => (\n            <div\n              key={index}\n              className=\"bg-white shadow-md rounded-lg p-4 mb-6 border border-gray-200\"\n            >\n              <p className=\"text-lg font-medium mb-3\">{q.questionText}</p>\n              <div>\n                {q.options.map((option, i) => (\n                  <label\n                    key={i}\n                    className={`block p-2 mb-2 border rounded ${getOptionClass(q, option, index)}`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={`question-${index}`}\n                      value={option}\n                      checked={userAnswers[index] === option}\n                      onChange={() => handleOptionChange(index, option)}\n                      className=\"mr-2\"\n                      disabled={submitted}\n                    />\n                    {option}\n                  </label>\n                ))}\n              </div>\n              {submitted && (\n                <p className=\"mt-2\">\n                  {userAnswers[index] === q.correctAnswer ? (\n                    <span className=\"text-green-600 font-semibold\">Correct!</span>\n                  ) : (\n                    <span className=\"text-red-600 font-semibold\">\n                      Incorrect. Correct answer: {q.correctAnswer}\n                    </span>\n                  )}\n                </p>\n              )}\n            </div>\n          ))}\n\n          {!submitted && (\n            <button type=\"submit\" className=\"bg-blue-600 text-white px-6 py-2 rounded\">\n              Submit Answers\n            </button>\n          )}\n\n          {submitted && (\n            <div className=\"mt-4\">\n              <p className=\"text-xl font-bold\">\n                You got {correctCountForDisplay} out of {exam.questions.length} correct!\n              </p>\n              <p className=\"text-lg\">\n                {correctCountForDisplay >= 40\n                  ? \"Congratulations! You have passed the exam.\"\n                  : \"Sorry, you did not pass the exam.\"}\n              </p>\n              {timeTaken !== null && (\n                <p className=\"text-lg\">\n                  Time Taken: {Math.floor(timeTaken / 60)} minutes {timeTaken % 60} seconds.\n                </p>\n              )}\n              <p className=\"text-lg\">Cheating Attempts: {cheatingCount}</p>\n            </div>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport async function getServerSideProps(context) {\n  // Verify that the user is authenticated\n  const session = await getServerSession(context.req, context.res, authOptions);\n  if (!session) {\n    return {\n      redirect: { destination: \"/sign-in\", permanent: false },\n    };\n  }\n\n  // Connect to the database and fetch the exam data directly\n  try {\n    await connectToDatabase();\n    const exam = await Exam.findById(context.params.id);\n\n    if (!exam || !exam.questions) {\n      return { notFound: true };\n    }\n\n    // Convert documents (like ObjectIDs) to plain objects\n    const examObj = JSON.parse(JSON.stringify(exam));\n    return { props: { exam: examObj } };\n  } catch (error) {\n    console.error(\"Error fetching exam:\", error);\n    return { notFound: true };\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 928, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}