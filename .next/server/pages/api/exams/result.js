"use strict";(()=>{var e={};e.id=863,e.ids=[863],e.modules={8667:(e,n)=>{Object.defineProperty(n,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,n,t)=>{e.exports=t(75600)},56037:e=>{e.exports=require("mongoose")},64689:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(56037),s=t.n(r);if(!process.env.MONGO_URI)throw Error("Please define the MONGO_URI environment variable");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let a=async function(){return o.conn||(o.promise||(o.promise=s().connect(process.env.MONGO_URI).then(e=>e.connection)),o.conn=await o.promise),o.conn}},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},84806:(e,n,t)=>{t.r(n),t.d(n,{config:()=>c,default:()=>l,routeModule:()=>d});var r={};t.r(r),t.d(r,{default:()=>u});var s=t(33480),o=t(8667),a=t(86435),i=t(64689);async function u(e,n){if("POST"!==e.method)return n.status(405).json({message:"Method Not Allowed"});try{let{userId:t,examId:r,score:s,total:o,passed:a,timeTaken:u}=e.body;if(!r||!t||null==s||null==o||null==a||null==u)return n.status(400).json({message:"Missing required fields"});let{db:l}=await (0,i.A)();if(await l.collection("examResults").findOne({examId:r,userId:t}))return n.status(400).json({message:"You have already attempted this exam"});let c={examId:r,userId:t,score:s,total:o,passed:a,timeTaken:u,createdAt:new Date};return await l.collection("examResults").insertOne(c),n.status(200).json({message:"Result saved successfully",data:c})}catch(e){return console.error("Error saving exam result:",e),n.status(500).json({message:"Internal Server Error",error:e.message})}}t(56037);let l=(0,a.M)(r,"default"),c=(0,a.M)(r,"config"),d=new s.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/exams/result",pathname:"/api/exams/result",bundlePath:"",filename:""},userland:r})},86435:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,t){return t in n?n[t]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,t)):"function"==typeof n&&"default"===t?n:void 0}}})}};var n=require("../../../webpack-api-runtime.js");n.C(e);var t=n(n.s=84806);module.exports=t})();