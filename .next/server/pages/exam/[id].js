(()=>{var e={};e.id=781,e.ids=[220,636,781],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},2015:e=>{"use strict";e.exports=require("react")},2768:()=>{},2830:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(8732),a=s(2341);function n(){return(0,r.jsxs)(a.Html,{lang:"en",children:[(0,r.jsx)(a.Head,{}),(0,r.jsxs)("body",{className:"antialiased",children:[(0,r.jsx)(a.Main,{}),(0,r.jsx)(a.NextScript,{})]})]})}},3873:e=>{"use strict";e.exports=require("path")},4722:e=>{"use strict";e.exports=require("next-auth/react")},4962:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>S,default:()=>g,getServerSideProps:()=>P,getStaticPaths:()=>b,getStaticProps:()=>f,reportWebVitals:()=>j,routeModule:()=>M,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>A,unstable_getStaticProps:()=>v});var r={};s.r(r),s.d(r,{default:()=>m,getServerSideProps:()=>h});var a=s(3885),n=s(237),i=s(1413),o=s(2830),d=s(9542),c=s(8732);require("@mediapipe/face_detection");var l=s(2015);let u=require("next/head");var p=s.n(u);function x({onCheatingDetected:e}){let t=(0,l.useRef)(null),[s,r]=(0,l.useState)(!1);return(0,c.jsxs)("div",{children:[(0,c.jsx)("video",{ref:t,className:"hidden"}),s&&(0,c.jsx)("div",{className:"fixed top-4 left-4 bg-red-600 text-white px-4 py-2 rounded shadow-md",children:"Warning: Cheating Detected!"})]})}function m({exam:e}){let[t,s]=(0,l.useState)({}),[r,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(2400),[o,d]=(0,l.useState)(0),[u,m]=(0,l.useState)(null),h=(e,t)=>{s(s=>({...s,[e]:t}))},g=async s=>{if(s&&s.preventDefault&&s.preventDefault(),r)return;a(!0);let i=e.questions.reduce((e,s,r)=>t[r]===s.correctAnswer?e+1:e,0),d=e.questions.length,c=2400-n;m(c);let l={examId:e._id,score:i,total:d,passed:i>=40,timeTaken:c,cheatingCount:o,createdAt:new Date};try{await fetch("/api/exams/result",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}catch(e){console.error("Failed to save exam result:",e)}},f=(e,s,a)=>r?s===e.correctAnswer?"bg-green-100":t[a]===s&&s!==e.correctAnswer?"bg-red-100":"":"cursor-pointer",b=Math.floor(n/60),P=n%60,S=e.questions.reduce((e,s,r)=>t[r]===s.correctAnswer?e+1:e,0);return(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(x,{onCheatingDetected:()=>{d(e=>e+1)}}),!r&&(0,c.jsxs)("div",{className:"fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded shadow-md",children:["Time Remaining: ",b,":",P<10?`0${P}`:P]}),(0,c.jsxs)("div",{className:"p-6 max-w-3xl mx-auto",children:[(0,c.jsx)(p(),{children:(0,c.jsx)("title",{children:e.title})}),(0,c.jsx)("h1",{className:"text-3xl font-bold mb-6",children:e.title}),(0,c.jsxs)("form",{onSubmit:g,children:[e.questions.map((e,s)=>(0,c.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 mb-6 border border-gray-200",children:[(0,c.jsx)("p",{className:"text-lg font-medium mb-3",children:e.questionText}),(0,c.jsx)("div",{children:e.options.map((a,n)=>(0,c.jsxs)("label",{className:`block p-2 mb-2 border rounded ${f(e,a,s)}`,children:[(0,c.jsx)("input",{type:"radio",name:`question-${s}`,value:a,checked:t[s]===a,onChange:()=>h(s,a),className:"mr-2",disabled:r}),a]},n))}),r&&(0,c.jsx)("p",{className:"mt-2",children:t[s]===e.correctAnswer?(0,c.jsx)("span",{className:"text-green-600 font-semibold",children:"Correct!"}):(0,c.jsxs)("span",{className:"text-red-600 font-semibold",children:["Incorrect. Correct answer: ",e.correctAnswer]})})]},s)),!r&&(0,c.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded",children:"Submit Answers"}),r&&(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsxs)("p",{className:"text-xl font-bold",children:["You got ",S," out of ",e.questions.length," correct!"]}),(0,c.jsx)("p",{className:"text-lg",children:S>=passingScore?"Congratulations! You have passed the exam.":"Sorry, you did not pass the exam."}),null!==u&&(0,c.jsxs)("p",{className:"text-lg",children:["Time Taken: ",Math.floor(u/60)," minutes ",u%60," seconds."]}),(0,c.jsxs)("p",{className:"text-lg",children:["Cheating Attempts: ",o]})]})]})]})]})}async function h({params:e,req:t}){let s=t.headers["x-forwarded-proto"]||"http",r=t.headers.host,a=`${s}://${r}/api/exams/${e.id}`,n=await fetch(a);return n.ok?{props:{exam:await n.json()}}:(console.error("API error response:",await n.text()),{notFound:!0})}let g=(0,i.M)(r,"default"),f=(0,i.M)(r,"getStaticProps"),b=(0,i.M)(r,"getStaticPaths"),P=(0,i.M)(r,"getServerSideProps"),S=(0,i.M)(r,"config"),j=(0,i.M)(r,"reportWebVitals"),v=(0,i.M)(r,"unstable_getStaticProps"),A=(0,i.M)(r,"unstable_getStaticPaths"),w=(0,i.M)(r,"unstable_getStaticParams"),N=(0,i.M)(r,"unstable_getServerProps"),y=(0,i.M)(r,"unstable_getServerSideProps"),M=new a.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/exam/[id]",pathname:"/exam/[id]",bundlePath:"",filename:""},components:{App:d.default,Document:o.default},userland:r})},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9542:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(8732);s(2768);var a=s(4722);function n({Component:e,pageProps:t}){return(0,r.jsx)(a.SessionProvider,{session:t.session,children:(0,r.jsx)(e,{...t})})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[341],()=>s(4962));module.exports=r})();